.table mother
----
application/datalog

.table father
----
application/datalog

parents{child: C, mother: M, father: F} :-
  mother{child: C, mother: M} &
  father{child: C, father: F}.
----
application/datalog

sibling{left: L, right: R} :-
  parents{child: L, mother: M, father: F} &
  parents{child: R, mother: M, father: F} &
  L != R.
----
application/datalog

mother{child: "Pete", mother: "Mary"}.
----
incremental-datalog/trace
mother (BaseFactTable): [mother{child: "Pete", mother: "Mary"}+1]
0 (Match): [{C: "Pete", M: "Mary"}+1]
2 (Join): []

father{child: "Pete", father: "Paul"}.
----
incremental-datalog/trace
father (BaseFactTable): [father{child: "Pete", father: "Paul"}+1]
1 (Match): [{C: "Pete", F: "Paul"}+1]
2 (Join): [{C: "Pete", F: "Paul", M: "Mary"}+1]
parents (Substitute): [parents{child: "Pete", father: "Paul", mother: "Mary"}+1]
3 (Match): [{F: "Paul", L: "Pete", M: "Mary"}+1]
4 (Match): [{F: "Paul", M: "Mary", R: "Pete"}+1]
5 (Join): [{F: "Paul", L: "Pete", M: "Mary", R: "Pete"}+1]
5 (Join): [{F: "Paul", L: "Pete", M: "Mary", R: "Pete"}+1]
7 (Join): []
7 (Join): []

mother{child: "Carolyn", mother: "Mary"}.
----
incremental-datalog/trace
mother (BaseFactTable): [mother{child: "Carolyn", mother: "Mary"}+1]
0 (Match): [{C: "Carolyn", M: "Mary"}+1]
2 (Join): []

father{child: "Carolyn", father: "Paul"}.
----
incremental-datalog/trace
father (BaseFactTable): [father{child: "Carolyn", father: "Paul"}+1]
1 (Match): [{C: "Carolyn", F: "Paul"}+1]
2 (Join): [{C: "Carolyn", F: "Paul", M: "Mary"}+1]
parents (Substitute): [parents{child: "Carolyn", father: "Paul", mother: "Mary"}+1]
3 (Match): [{F: "Paul", L: "Carolyn", M: "Mary"}+1]
4 (Match): [{F: "Paul", M: "Mary", R: "Carolyn"}+1]
5 (Join): [{F: "Paul", L: "Carolyn", M: "Mary", R: "Pete"}+1, {F: "Paul", L: "Carolyn", M: "Mary", R: "Carolyn"}+1]
5 (Join): [{F: "Paul", L: "Pete", M: "Mary", R: "Carolyn"}+1, {F: "Paul", L: "Carolyn", M: "Mary", R: "Carolyn"}+1]
7 (Join): [{F: "Paul", L: "Carolyn", M: "Mary", R: "Pete"}+1]
7 (Join): []
7 (Join): [{F: "Paul", L: "Pete", M: "Mary", R: "Carolyn"}+1]
7 (Join): []
sibling (Substitute): [sibling{left: "Carolyn", right: "Pete"}+1]
sibling (Substitute): [sibling{left: "Pete", right: "Carolyn"}+1]

mother{child: "Steve", mother: "Jill"}.
----
incremental-datalog/trace
mother (BaseFactTable): [mother{child: "Steve", mother: "Jill"}+1]
0 (Match): [{C: "Steve", M: "Jill"}+1]
2 (Join): []

mother{child: C, mother: M}?
----
application/datalog
mother{child: "Carolyn", mother: "Mary"}.
mother{child: "Pete", mother: "Mary"}.
mother{child: "Steve", mother: "Jill"}.

mother{child: C, mother: "Mary"}?
----
application/datalog
mother{child: "Carolyn", mother: "Mary"}.
mother{child: "Pete", mother: "Mary"}.
