.table input.char
----
application/datalog

.table input.next
----
application/datalog

main{span: span{from: P1, to: P2}} :-
  input.char{id: P1, char: C} &
  input.next{left: P1, right: P2} &
  base.lte{a: "a", b: C} &
  base.lte{a: C, b: "z"}.
----
application/datalog

input.char{char: "END", id: -2}.
----
incremental-datalog/trace
input.char (BaseFactTable): [input.char{char: "END", id: -2}+1]
0 (Match): [{C: "END", P1: -2}+1]
2 (Join): []

input.char{char: "START", id: -1}.
----
incremental-datalog/trace
input.char (BaseFactTable): [input.char{char: "START", id: -1}+1]
0 (Match): [{C: "START", P1: -1}+1]
2 (Join): []

input.char{char: "b", id: 0}.
----
incremental-datalog/trace
input.char (BaseFactTable): [input.char{char: "b", id: 0}+1]
0 (Match): [{C: "b", P1: 0}+1]
2 (Join): []

input.next{left: -1, right: 0}.
----
incremental-datalog/trace
input.next (BaseFactTable): [input.next{left: -1, right: 0}+1]
1 (Match): [{P1: -1, P2: 0}+1]
2 (Join): [{C: "START", P1: -1, P2: 0}+1]
4 (Join): [{C: "START", P1: -1, P2: 0}+1]
6 (Join): [{C: "START", P1: -1, P2: 0}+1]
main (Substitute): [main{span: span{from: -1, to: 0}}+1]

input.next{left: 0, right: -2}.
----
incremental-datalog/trace
input.next (BaseFactTable): [input.next{left: 0, right: -2}+1]
1 (Match): [{P1: 0, P2: -2}+1]
2 (Join): [{C: "b", P1: 0, P2: -2}+1]
4 (Join): [{C: "b", P1: 0, P2: -2}+1]
6 (Join): [{C: "b", P1: 0, P2: -2}+1]
main (Substitute): [main{span: span{from: 0, to: -2}}+1]
