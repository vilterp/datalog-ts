.table edge
----
application/datalog

node{id: A} :-
  edge{from: A, to: B} |
  edge{from: B, to: A}.
----
application/datalog

reach{from: A, to: C} :-
  node{id: A} & node{id: C} & A = C |
  edge{from: A, to: C} |
  edge{from: A, to: B} &
  reach{from: B, to: C}.
----
application/datalog

sameSCC{a: A, b: B} :-
  reach{from: A, to: B} &
  reach{from: B, to: A}.
----
application/datalog

edge{from: "a", to: "b"}.
----
incremental-datalog/trace
edge: [edge{from: "a", to: "b"}+1]
1: [{A: "a", B: "b"}+1]
2: [{A: "b", B: "a"}+1]
10: [{A: "a", C: "b"}+1]
11: [{A: "a", B: "b"}+1]
0: [{A: "a", B: "b"}+1]
0: [{A: "b", B: "a"}+1]
4: [{A: "a", C: "b"}+1]
13: []
3: [{A: "a", B: "b"}+1]
3: [{A: "b", B: "a"}+1]
14: [{A: "a", C: "b"}+1]
node: [node{id: "a"}+1]
node: [node{id: "b"}+1]
reach: [reach{from: "a", to: "b"}+1]
5: [{A: "a"}+1]
6: [{C: "a"}+1]
5: [{A: "b"}+1]
6: [{C: "b"}+1]
12: [{B: "a", C: "b"}+1]
15: [{A: "a", B: "b"}+1]
16: [{A: "b", B: "a"}+1]
7: [{A: "a", C: "a"}+1, {A: "a", C: "b"}+1]
7: [{A: "a", C: "a"}+1, {A: "b", C: "a"}+1]
7: [{A: "b", C: "a"}+1, {A: "b", C: "b"}+1]
7: [{A: "a", C: "b"}+1, {A: "b", C: "b"}+1]
13: []
17: []
17: []
9: [{A: "a", C: "a"}+1]
9: []
9: [{A: "a", C: "a"}+1]
9: []
9: []
9: [{A: "b", C: "b"}+1]
9: []
9: [{A: "b", C: "b"}+1]
4: [{A: "a", C: "a"}+1]
4: [{A: "a", C: "a"}+1]
4: [{A: "b", C: "b"}+1]
4: [{A: "b", C: "b"}+1]
14: [{A: "a", C: "a"}+1]
14: []
14: [{A: "b", C: "b"}+1]
14: []
reach: [reach{from: "a", to: "a"}+1]
reach: [reach{from: "b", to: "b"}+1]
12: [{B: "a", C: "a"}+1]
15: [{A: "a", B: "a"}+1]
16: [{A: "a", B: "a"}+1]
12: [{B: "b", C: "b"}+1]
15: [{A: "b", B: "b"}+1]
16: [{A: "b", B: "b"}+1]
13: []
17: [{A: "a", B: "a"}+1]
17: [{A: "a", B: "a"}+1]
13: [{A: "a", B: "b", C: "b"}+1]
17: [{A: "b", B: "b"}+1]
17: [{A: "b", B: "b"}+1]
18: [{A: "a", B: "a"}+1]
18: []
4: [{A: "a", B: "b", C: "b"}+1]
18: [{A: "b", B: "b"}+1]
18: []
sameSCC: [sameSCC{a: "a", b: "a"}+1]
14: [{A: "a", B: "b", C: "b"}+1]
sameSCC: [sameSCC{a: "b", b: "b"}+1]
reach: [reach{from: "a", to: "b"}+1]
12: [{B: "a", C: "b"}+1]
15: [{A: "a", B: "b"}+1]
16: [{A: "b", B: "a"}+1]
13: []
17: []
17: []

edge{from: "b", to: "c"}.
----
incremental-datalog/trace
edge: [edge{from: "b", to: "c"}+1]
1: [{A: "b", B: "c"}+1]
2: [{A: "c", B: "b"}+1]
10: [{A: "b", C: "c"}+1]
11: [{A: "b", B: "c"}+1]
0: [{A: "b", B: "c"}+1]
0: [{A: "c", B: "b"}+1]
4: [{A: "b", C: "c"}+1]
13: []
3: [{A: "b", B: "c"}+1]
3: [{A: "c", B: "b"}+1]
14: [{A: "b", C: "c"}+1]
node: [node{id: "b"}+1]
node: [node{id: "c"}+1]
reach: [reach{from: "b", to: "c"}+1]
5: [{A: "b"}+1]
6: [{C: "b"}+1]
5: [{A: "c"}+1]
6: [{C: "c"}+1]
12: [{B: "b", C: "c"}+1]
15: [{A: "b", B: "c"}+1]
16: [{A: "c", B: "b"}+1]
7: [{A: "b", C: "a"}+1, {A: "b", C: "b"}+2, {A: "b", C: "c"}+1]
7: [{A: "a", C: "b"}+1, {A: "b", C: "b"}+2, {A: "c", C: "b"}+1]
7: [{A: "c", C: "a"}+1, {A: "c", C: "b"}+2, {A: "c", C: "c"}+1]
7: [{A: "a", C: "c"}+1, {A: "b", C: "c"}+2, {A: "c", C: "c"}+1]
13: [{A: "a", B: "b", C: "c"}+1]
17: []
17: []
9: []
9: [{A: "b", C: "b"}+2]
9: []
9: []
9: [{A: "b", C: "b"}+2]
9: []
9: []
9: []
9: [{A: "c", C: "c"}+1]
9: []
9: []
9: [{A: "c", C: "c"}+1]
4: [{A: "a", B: "b", C: "c"}+1]
4: [{A: "b", C: "b"}+2]
4: [{A: "b", C: "b"}+2]
4: [{A: "c", C: "c"}+1]
4: [{A: "c", C: "c"}+1]
14: [{A: "a", B: "b", C: "c"}+1]
14: []
14: []
14: [{A: "c", C: "c"}+1]
14: []
reach: [reach{from: "a", to: "c"}+1]
reach: [reach{from: "c", to: "c"}+1]
12: [{B: "a", C: "c"}+1]
15: [{A: "a", B: "c"}+1]
16: [{A: "c", B: "a"}+1]
12: [{B: "c", C: "c"}+1]
15: [{A: "c", B: "c"}+1]
16: [{A: "c", B: "c"}+1]
13: []
17: []
17: []
13: [{A: "b", B: "c", C: "c"}+1]
17: [{A: "c", B: "c"}+1]
17: [{A: "c", B: "c"}+1]
4: [{A: "b", B: "c", C: "c"}+1]
18: [{A: "c", B: "c"}+1]
18: []
14: [{A: "b", B: "c", C: "c"}+1]
sameSCC: [sameSCC{a: "c", b: "c"}+1]
reach: [reach{from: "b", to: "c"}+1]
12: [{B: "b", C: "c"}+1]
15: [{A: "b", B: "c"}+1]
16: [{A: "c", B: "b"}+1]
13: [{A: "a", B: "b", C: "c"}+1]
17: []
17: []
4: [{A: "a", B: "b", C: "c"}+1]
14: []

reach{}?
----
application/datalog
reach{from: "a", to: "a"}.
reach{from: "a", to: "b"}.
reach{from: "a", to: "c"}.
reach{from: "b", to: "b"}.
reach{from: "b", to: "c"}.
reach{from: "c", to: "c"}.

sameSCC{}?
----
application/datalog
sameSCC{a: "a", b: "a"}.
sameSCC{a: "b", b: "b"}.
sameSCC{a: "c", b: "c"}.

edge{from: "c", to: "a"}.
----
incremental-datalog/trace
edge: [edge{from: "c", to: "a"}+1]
1: [{A: "c", B: "a"}+1]
2: [{A: "a", B: "c"}+1]
10: [{A: "c", C: "a"}+1]
11: [{A: "c", B: "a"}+1]
0: [{A: "c", B: "a"}+1]
0: [{A: "a", B: "c"}+1]
4: [{A: "c", C: "a"}+1]
13: [{A: "c", B: "a", C: "b"}+2, {A: "c", B: "a", C: "a"}+1, {A: "c", B: "a", C: "c"}+1]
3: [{A: "c", B: "a"}+1]
3: [{A: "a", B: "c"}+1]
14: [{A: "c", C: "a"}+1]
4: [{A: "c", B: "a", C: "b"}+2]
4: [{A: "c", B: "a", C: "a"}+1]
4: [{A: "c", B: "a", C: "c"}+1]
node: [node{id: "c"}+1]
node: [node{id: "a"}+1]
reach: [reach{from: "c", to: "a"}+1]
14: [{A: "c", B: "a", C: "b"}+1]
14: [{A: "c", B: "a", C: "a"}+1]
14: [{A: "c", B: "a", C: "c"}+1]
5: [{A: "c"}+1]
6: [{C: "c"}+1]
5: [{A: "a"}+1]
6: [{C: "a"}+1]
12: [{B: "c", C: "a"}+1]
15: [{A: "c", B: "a"}+1]
16: [{A: "a", B: "c"}+1]
reach: [reach{from: "c", to: "b"}+1]
reach: [reach{from: "c", to: "a"}+1]
reach: [reach{from: "c", to: "c"}+1]
7: [{A: "c", C: "a"}+2, {A: "c", C: "b"}+2, {A: "c", C: "c"}+2]
7: [{A: "a", C: "c"}+2, {A: "b", C: "c"}+2, {A: "c", C: "c"}+2]
7: [{A: "a", C: "a"}+2, {A: "a", C: "b"}+2, {A: "a", C: "c"}+2]
7: [{A: "a", C: "a"}+2, {A: "b", C: "a"}+2, {A: "c", C: "a"}+2]
13: [{A: "b", B: "c", C: "a"}+1]
17: [{A: "c", B: "a"}+1]
17: [{A: "a", B: "c"}+1]
12: [{B: "c", C: "b"}+1]
15: [{A: "c", B: "b"}+1]
16: [{A: "b", B: "c"}+1]
12: [{B: "c", C: "a"}+1]
15: [{A: "c", B: "a"}+1]
16: [{A: "a", B: "c"}+1]
12: [{B: "c", C: "c"}+1]
15: [{A: "c", B: "c"}+1]
16: [{A: "c", B: "c"}+1]
9: []
9: []
9: [{A: "c", C: "c"}+2]
9: []
9: []
9: [{A: "c", C: "c"}+2]
9: [{A: "a", C: "a"}+2]
9: []
9: []
9: [{A: "a", C: "a"}+2]
9: []
9: []
4: [{A: "b", B: "c", C: "a"}+1]
18: [{A: "c", B: "a"}+1]
18: [{A: "a", B: "c"}+1]
13: [{A: "b", B: "c", C: "b"}+1]
17: [{A: "c", B: "b"}+2]
17: [{A: "b", B: "c"}+2]
13: [{A: "b", B: "c", C: "a"}+1]
17: [{A: "c", B: "a"}+1]
17: [{A: "a", B: "c"}+1]
13: [{A: "b", B: "c", C: "c"}+1]
17: [{A: "c", B: "c"}+2]
17: [{A: "c", B: "c"}+2]
4: [{A: "c", C: "c"}+2]
4: [{A: "c", C: "c"}+2]
4: [{A: "a", C: "a"}+2]
4: [{A: "a", C: "a"}+2]
14: [{A: "b", B: "c", C: "a"}+1]
sameSCC: [sameSCC{a: "c", b: "a"}+1]
sameSCC: [sameSCC{a: "a", b: "c"}+1]
4: [{A: "b", B: "c", C: "b"}+1]
18: [{A: "c", B: "b"}+1]
18: [{A: "b", B: "c"}+1]
4: [{A: "b", B: "c", C: "a"}+1]
18: []
18: []
4: [{A: "b", B: "c", C: "c"}+1]
18: []
18: []
14: []
14: []
14: []
14: []
reach: [reach{from: "b", to: "a"}+1]
14: [{A: "b", B: "c", C: "b"}+1]
sameSCC: [sameSCC{a: "c", b: "b"}+1]
sameSCC: [sameSCC{a: "b", b: "c"}+1]
14: []
14: []
12: [{B: "b", C: "a"}+1]
15: [{A: "b", B: "a"}+1]
16: [{A: "a", B: "b"}+1]
reach: [reach{from: "b", to: "b"}+1]
13: [{A: "a", B: "b", C: "a"}+1]
17: [{A: "b", B: "a"}+2]
17: [{A: "a", B: "b"}+2]
12: [{B: "b", C: "b"}+1]
15: [{A: "b", B: "b"}+1]
16: [{A: "b", B: "b"}+1]
4: [{A: "a", B: "b", C: "a"}+1]
18: [{A: "b", B: "a"}+1]
18: [{A: "a", B: "b"}+1]
13: [{A: "a", B: "b", C: "b"}+1]
17: [{A: "b", B: "b"}+2]
17: [{A: "b", B: "b"}+2]
14: [{A: "a", B: "b", C: "a"}+1]
sameSCC: [sameSCC{a: "b", b: "a"}+1]
sameSCC: [sameSCC{a: "a", b: "b"}+1]
4: [{A: "a", B: "b", C: "b"}+1]
18: []
18: []
reach: [reach{from: "a", to: "a"}+1]
14: []
12: [{B: "a", C: "a"}+1]
15: [{A: "a", B: "a"}+1]
16: [{A: "a", B: "a"}+1]
13: [{A: "c", B: "a", C: "a"}+1]
17: [{A: "a", B: "a"}+2]
17: [{A: "a", B: "a"}+2]
4: [{A: "c", B: "a", C: "a"}+1]
18: []
18: []
14: []

reach{}?
----
application/datalog
reach{from: "a", to: "a"}.
reach{from: "a", to: "b"}.
reach{from: "a", to: "c"}.
reach{from: "b", to: "a"}.
reach{from: "b", to: "b"}.
reach{from: "b", to: "c"}.
reach{from: "c", to: "a"}.
reach{from: "c", to: "b"}.
reach{from: "c", to: "c"}.

sameSCC{}?
----
application/datalog
sameSCC{a: "a", b: "a"}.
sameSCC{a: "a", b: "b"}.
sameSCC{a: "a", b: "c"}.
sameSCC{a: "b", b: "a"}.
sameSCC{a: "b", b: "b"}.
sameSCC{a: "b", b: "c"}.
sameSCC{a: "c", b: "a"}.
sameSCC{a: "c", b: "b"}.
sameSCC{a: "c", b: "c"}.

-edge{from: "c", to: "a"}.
----
incremental-datalog/trace
edge: [edge{from: "c", to: "a"}-1]
1: [{A: "c", B: "a"}-1]
2: [{A: "a", B: "c"}-1]
10: [{A: "c", C: "a"}-1]
11: [{A: "c", B: "a"}-1]
0: [{A: "c", B: "a"}-1]
0: [{A: "a", B: "c"}-1]
4: [{A: "c", C: "a"}-1]
13: [{A: "c", B: "a", C: "b"}-2, {A: "c", B: "a", C: "a"}-2, {A: "c", B: "a", C: "c"}-1]
3: [{A: "c", B: "a"}-1]
3: [{A: "a", B: "c"}-1]
14: [{A: "c", C: "a"}-1]
4: [{A: "c", B: "a", C: "b"}-2]
4: [{A: "c", B: "a", C: "a"}-2]
4: [{A: "c", B: "a", C: "c"}-1]
node: [node{id: "c"}-1]
node: [node{id: "a"}-1]
reach: [reach{from: "c", to: "a"}-1]
14: [{A: "c", B: "a", C: "b"}-1]
14: [{A: "c", B: "a", C: "a"}-1]
14: [{A: "c", B: "a", C: "c"}-1]
5: [{A: "c"}-1]
6: [{C: "c"}-1]
5: [{A: "a"}-1]
6: [{C: "a"}-1]
12: [{B: "c", C: "a"}-1]
15: [{A: "c", B: "a"}-1]
16: [{A: "a", B: "c"}-1]
reach: [reach{from: "c", to: "b"}-1]
reach: [reach{from: "c", to: "a"}-1]
reach: [reach{from: "c", to: "c"}-1]
7: [{A: "c", C: "a"}-1, {A: "c", C: "b"}-2, {A: "c", C: "c"}-1]
7: [{A: "a", C: "c"}-1, {A: "b", C: "c"}-2, {A: "c", C: "c"}-1]
7: [{A: "a", C: "a"}-1, {A: "a", C: "b"}-2, {A: "a", C: "c"}-1]
7: [{A: "a", C: "a"}-1, {A: "b", C: "a"}-2, {A: "c", C: "a"}-1]
13: [{A: "b", B: "c", C: "a"}-1]
17: [{A: "c", B: "a"}-1]
17: [{A: "a", B: "c"}-1]
12: [{B: "c", C: "b"}-1]
15: [{A: "c", B: "b"}-1]
16: [{A: "b", B: "c"}-1]
12: [{B: "c", C: "a"}-1]
15: [{A: "c", B: "a"}-1]
16: [{A: "a", B: "c"}-1]
12: [{B: "c", C: "c"}-1]
15: [{A: "c", B: "c"}-1]
16: [{A: "c", B: "c"}-1]
9: []
9: []
9: [{A: "c", C: "c"}-1]
9: []
9: []
9: [{A: "c", C: "c"}-1]
9: [{A: "a", C: "a"}-1]
9: []
9: []
9: [{A: "a", C: "a"}-1]
9: []
9: []
4: [{A: "b", B: "c", C: "a"}-1]
18: []
18: []
13: [{A: "b", B: "c", C: "b"}-1]
17: [{A: "c", B: "b"}-2]
17: [{A: "b", B: "c"}-2]
13: [{A: "b", B: "c", C: "a"}-1]
17: [{A: "c", B: "a"}-1]
17: [{A: "a", B: "c"}-1]
13: [{A: "b", B: "c", C: "c"}-1]
17: [{A: "c", B: "c"}-1]
17: [{A: "c", B: "c"}-1]
4: [{A: "c", C: "c"}-1]
4: [{A: "c", C: "c"}-1]
4: [{A: "a", C: "a"}-1]
4: [{A: "a", C: "a"}-1]
14: []
4: [{A: "b", B: "c", C: "b"}-1]
18: [{A: "c", B: "b"}-1]
18: [{A: "b", B: "c"}-1]
4: [{A: "b", B: "c", C: "a"}-1]
18: [{A: "c", B: "a"}-1]
18: [{A: "a", B: "c"}-1]
4: [{A: "b", B: "c", C: "c"}-1]
18: []
18: []
14: []
14: []
14: []
14: []
14: [{A: "b", B: "c", C: "b"}-1]
sameSCC: [sameSCC{a: "c", b: "b"}-1]
sameSCC: [sameSCC{a: "b", b: "c"}-1]
14: [{A: "b", B: "c", C: "a"}-1]
sameSCC: [sameSCC{a: "c", b: "a"}-1]
sameSCC: [sameSCC{a: "a", b: "c"}-1]
14: []
reach: [reach{from: "b", to: "b"}-1]
reach: [reach{from: "b", to: "a"}-1]
12: [{B: "b", C: "b"}-1]
15: [{A: "b", B: "b"}-1]
16: [{A: "b", B: "b"}-1]
12: [{B: "b", C: "a"}-1]
15: [{A: "b", B: "a"}-1]
16: [{A: "a", B: "b"}-1]
13: [{A: "a", B: "b", C: "b"}-1]
17: [{A: "b", B: "b"}-1]
17: [{A: "b", B: "b"}-1]
13: [{A: "a", B: "b", C: "a"}-1]
17: [{A: "b", B: "a"}-2]
17: [{A: "a", B: "b"}-2]
4: [{A: "a", B: "b", C: "b"}-1]
18: []
18: []
4: [{A: "a", B: "b", C: "a"}-1]
18: [{A: "b", B: "a"}-1]
18: [{A: "a", B: "b"}-1]
14: []
14: [{A: "a", B: "b", C: "a"}-1]
sameSCC: [sameSCC{a: "b", b: "a"}-1]
sameSCC: [sameSCC{a: "a", b: "b"}-1]
reach: [reach{from: "a", to: "a"}-1]
12: [{B: "a", C: "a"}-1]
15: [{A: "a", B: "a"}-1]
16: [{A: "a", B: "a"}-1]
13: []
17: [{A: "a", B: "a"}-1]
17: [{A: "a", B: "a"}-1]
18: []
18: []

reach{}?
----
application/datalog
reach{from: "a", to: "a"}.
reach{from: "a", to: "b"}.
reach{from: "a", to: "c"}.
reach{from: "b", to: "b"}.
reach{from: "b", to: "c"}.
reach{from: "c", to: "c"}.

sameSCC{}?
----
application/datalog
sameSCC{a: "a", b: "a"}.
sameSCC{a: "b", b: "b"}.
sameSCC{a: "c", b: "c"}.
