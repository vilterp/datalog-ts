.table mother
----
text/plain

.table father
----
text/plain

parent{child: C, parent: P} :-
  mother{child: C, mother: P} | father{child: C, father: P}.
----
text/plain

grandparent{grandchild: A, grandparent: C} :-
  parent{child: A, parent: B} &
  parent{child: B, parent: C}.
----
text/plain

.rulegraph
----
application/graphviz
digraph G {
  "0" [fillcolor="moccasin" label="0: Union []" shape="box" style="filled"];
  "1" [fillcolor="thistle" label="1: grandparent: Join(B: parent.child = parent.parent) []" shape="box" style="filled"];
  "mother" [fillcolor="darksalmon" label="mother:  []" shape="box" style="filled"];
  "father" [fillcolor="darksalmon" label="father:  []" shape="box" style="filled"];
  "parent" [fillcolor="lightblue" label="parent: Subst({child: C, parent: P}) [child, parent]" shape="box" style="filled"];
  "grandparent" [fillcolor="lightblue" label="grandparent: Subst({grandchild: A, grandparent: C}) []" shape="box" style="filled"];
  "0" -> "parent" [];
  "1" -> "grandparent" [];
  "father" -> "0" [];
  "mother" -> "0" [];
  "parent" -> "1" [];
  "parent" -> "1" [];
}

father{child: "Mary", father: "Mark"}.
----
text/plain
father: [father{child: "Mary", father: "Mark"}; {}]
0: [father{child: "Mary", father: "Mark"}; {}]
parent: [parent{child: C, parent: P}; {}]
1: []
1: []

mother{child: "Pete", mother: "Mary"}.
----
text/plain
mother: [mother{child: "Pete", mother: "Mary"}; {}]
0: [mother{child: "Pete", mother: "Mary"}; {}]
parent: [parent{child: C, parent: P}; {}]
1: []
1: []

mother{child: "Carolyn", mother: "Mary"}.
----
text/plain
mother: [mother{child: "Carolyn", mother: "Mary"}; {}]
0: [mother{child: "Carolyn", mother: "Mary"}; {}]
parent: [parent{child: C, parent: P}; {}]
1: []
1: []
