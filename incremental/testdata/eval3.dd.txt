.table mother
----
text/plain

.table father
----
text/plain

parent{child: C, parent: P} :-
  mother{child: C, mother: P} | father{child: C, father: P}.
----
text/plain

grandparent{grandchild: A, grandparent: C} :-
  parent{child: A, parent: B} &
  parent{child: B, parent: C}.
----
text/plain

.rulegraph
----
application/graphviz
digraph G {
  "0" [color="black" label="0: Union []" shape="box"];
  "1" [color="black" label="1: Match(mother{child: C, mother: P}; {}) []" shape="box"];
  "2" [color="black" label="2: Match(father{child: C, father: P}; {}) []" shape="box"];
  "3" [color="black" label="3: Match(parent{child: A, parent: B}; {C: A, P: B}) [parent]" shape="box"];
  "4" [color="black" label="4: Join(parent & 3): grandparent []" shape="box"];
  "mother" [color="black" label="mother: Base []" shape="box"];
  "father" [color="black" label="father: Base []" shape="box"];
  "parent" [color="black" label="parent: Subst(parent{child: C, parent: P}) [child]" shape="box"];
  "grandparent" [color="black" label="grandparent: Subst(grandparent{grandchild: A, grandparent: C}) []" shape="box"];
  "0" -> "parent" [];
  "1" -> "0" [];
  "2" -> "0" [];
  "3" -> "4" [];
  "4" -> "grandparent" [];
  "father" -> "2" [];
  "mother" -> "1" [];
  "parent" -> "3" [];
  "parent" -> "4" [];
}

father{child: "Mary", father: "Mark"}.
----
text/plain
father: [father{child: "Mary", father: "Mark"}; {}]
2: [father{child: "Mary", father: "Mark"}; {C: "Mary", P: "Mark"}]
0: [father{child: "Mary", father: "Mark"}; {C: "Mary", P: "Mark"}]
parent: [parent{child: "Mary", parent: "Mark"}; {C: "Mary", P: "Mark"}]
3: [parent{child: "Mary", parent: "Mark"}; {A: "Mary", B: "Mark"}]
4: []
4: []

mother{child: "Pete", mother: "Mary"}.
----
text/plain
mother: [mother{child: "Pete", mother: "Mary"}; {}]
1: [mother{child: "Pete", mother: "Mary"}; {C: "Pete", P: "Mary"}]
0: [mother{child: "Pete", mother: "Mary"}; {C: "Pete", P: "Mary"}]
parent: [parent{child: "Pete", parent: "Mary"}; {C: "Pete", P: "Mary"}]
3: [parent{child: "Pete", parent: "Mary"}; {A: "Pete", B: "Mary"}]
4: []
4: [grandparent{child: "Pete", parent: "Mary"}; {A: "Pete", B: "Mary", C: "Mary", P: "Mark"}]
grandparent: [grandparent{grandchild: "Pete", grandparent: "Mary"}; {A: "Pete", B: "Mary", C: "Mary", P: "Mark"}]

mother{child: "Carolyn", mother: "Mary"}.
----
text/plain
mother: [mother{child: "Carolyn", mother: "Mary"}; {}]
1: [mother{child: "Carolyn", mother: "Mary"}; {C: "Carolyn", P: "Mary"}]
0: [mother{child: "Carolyn", mother: "Mary"}; {C: "Carolyn", P: "Mary"}]
parent: [parent{child: "Carolyn", parent: "Mary"}; {C: "Carolyn", P: "Mary"}]
3: [parent{child: "Carolyn", parent: "Mary"}; {A: "Carolyn", B: "Mary"}]
4: []
4: [grandparent{child: "Carolyn", parent: "Mary"}; {A: "Carolyn", B: "Mary", C: "Mary", P: "Mark"}]
grandparent: [grandparent{grandchild: "Carolyn", grandparent: "Mary"}; {A: "Carolyn", B: "Mary", C: "Mary", P: "Mark"}]
