.table mother;
.table father;
matGramp{child: A, grandfather: C} :-
  mother{child: A, mother: B} & father{child: B, father: C}.
----
digraph G {
  "0" [label="0: Match(father{child: B, father: C})"];
  "1" [label="1: Match(mother{child: A, mother: B})"];
  "2" [label="2: Join(1 & 0)"];
  "father" [label="father"];
  "matGramp" [label="matGramp: Subst(matGramp{child: A, grandfather: C})"];
  "mother" [label="mother"];
  "0" -> "2" [];
  "1" -> "2" [];
  "2" -> "matGramp" [];
  "father" -> "0" [];
  "mother" -> "1" []
}

foo{a: A} :- bar{a: A}.;
bar{a: A} :- foo{a: A}.
----
digraph G {
  "0" [label="0: Match(bar{a: A})"];
  "1" [label="1: Match(foo{a: A})"];
  "bar" [label="bar: Subst(bar{a: A})"];
  "foo" [label="foo: Subst(foo{a: A})"];
  "0" -> "foo" [];
  "1" -> "bar" [];
  "bar" -> "0" [];
  "foo" -> "1" []
}

.table a;
.table b;
.table c;
d{} :- a{} & b{} & c{}.
----
digraph G {
  "0" [label="0: Match(c{})"];
  "1" [label="1: Match(b{})"];
  "2" [label="2: Join(1 & 0)"];
  "3" [label="3: Match(a{})"];
  "4" [label="4: Join(3 & 2)"];
  "a" [label="a"];
  "b" [label="b"];
  "c" [label="c"];
  "d" [label="d: Subst(d{})"];
  "0" -> "2" [];
  "1" -> "2" [];
  "2" -> "4" [];
  "3" -> "4" [];
  "4" -> "d" [];
  "a" -> "3" [];
  "b" -> "1" [];
  "c" -> "0" []
}

parent{child: C, parent: P} :-
  mother{child: C, mother: P} | father{child: C, father: P}.
----
digraph G {
  "0" [label="0: Union"];
  "1" [label="1: Match(mother{child: C, mother: P})"];
  "2" [label="2: Match(father{child: C, father: P})"];
  "parent" [label="parent: Subst(parent{child: C, parent: P})"];
  "0" -> "parent" [];
  "1" -> "0" [];
  "2" -> "0" [];
  "father" -> "2" [];
  "mother" -> "1" []
}

grandparent{grandchild: A, grandparent: C} :-
  parent{child: A, parent: B} &
  parent{child: B, parent: C}.
----
digraph G {
  "0" [label="0: Match(parent{child: B, parent: C})"];
  "1" [label="1: Match(parent{child: A, parent: B})"];
  "2" [label="2: Join(1 & 0)"];
  "grandparent" [label="grandparent: Subst(grandparent{grandchild: A, grandparent: C})"];
  "0" -> "2" [];
  "1" -> "2" [];
  "2" -> "grandparent" [];
  "parent" -> "0" [];
  "parent" -> "1" []
}
