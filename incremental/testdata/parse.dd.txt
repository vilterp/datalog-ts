.table source
----
text/plain

value{from: F, to: T} :-
  null{from: F, to: T}.
----
text/propagation-log

null{from: P1, to: P3} :-
  source{pos: P1, char: "n", next: P2} &
  source{pos: P2, char: "u", next: P3} &
  source{pos: P3, char: "l"}.
----
text/propagation-log

.rulegraph
----
application/graphviz
digraph G {
  "0" [fillcolor="darkseagreen2" label="0: Match(null{from: F, to: T}; {P1: F, P3: T}) []" shape="box" style="filled"];
  "1" [fillcolor="darkseagreen2" label="1: Match(source{char: \"n\", next: P2, pos: P1}; {}) [P2]" shape="box" style="filled"];
  "2" [fillcolor="darkseagreen2" label="2: Match(source{char: \"u\", next: P3, pos: P2}; {}) [P2]" shape="box" style="filled"];
  "3" [fillcolor="thistle" label="3: Join(P2) [P3]" shape="box" style="filled"];
  "4" [fillcolor="darkseagreen2" label="4: Match(source{char: \"l\", pos: P3}; {}) [P3]" shape="box" style="filled"];
  "5" [fillcolor="thistle" label="5: Join(P3) []" shape="box" style="filled"];
  "source" [fillcolor="darksalmon" label="source:  []" shape="box" style="filled"];
  "value" [fillcolor="lightblue" label="value: Subst({from: F, to: T}) []" shape="box" style="filled"];
  "null" [fillcolor="lightblue" label="null: Subst({from: P1, to: P3}) []" shape="box" style="filled"];
  "0" -> "value" [];
  "1" -> "3" [];
  "2" -> "3" [];
  "3" -> "5" [];
  "4" -> "5" [];
  "5" -> "null" [];
  "null" -> "0" [];
  "source" -> "1" [];
  "source" -> "2" [];
  "source" -> "4" [];
}

source{pos: 0, char: "n", next: 1}.
----
text/propagation-log
source from null: source{char: "n", next: 1, pos: 0}; {}. 
  source{char: "n", next: 1, pos: 0}; {}
1 from source: source{char: "n", next: 1, pos: 0}; {}. Match(source{char: "n", next: P2, pos: P1}; {})
  source{char: "n", next: 1, pos: 0}; {P1: 0, P2: 1}
2 from source: source{char: "n", next: 1, pos: 0}; {}. Match(source{char: "u", next: P3, pos: P2}; {})
4 from source: source{char: "n", next: 1, pos: 0}; {}. Match(source{char: "l", pos: P3}; {})
3 from 1: source{char: "n", next: 1, pos: 0}; {P1: 0, P2: 1}. Join(P2)

source{pos: 1, char: "u", next: 2}.
----
text/propagation-log
source from null: source{char: "u", next: 2, pos: 1}; {}. 
  source{char: "u", next: 2, pos: 1}; {}
1 from source: source{char: "u", next: 2, pos: 1}; {}. Match(source{char: "n", next: P2, pos: P1}; {})
2 from source: source{char: "u", next: 2, pos: 1}; {}. Match(source{char: "u", next: P3, pos: P2}; {})
  source{char: "u", next: 2, pos: 1}; {P2: 1, P3: 2}
4 from source: source{char: "u", next: 2, pos: 1}; {}. Match(source{char: "l", pos: P3}; {})
3 from 2: source{char: "u", next: 2, pos: 1}; {P2: 1, P3: 2}. Join(P2)
  (); {P1: 0, P2: 1, P3: 2}
5 from 3: (); {P1: 0, P2: 1, P3: 2}. Join(P3)

source{pos: 2, char: "l", next: 3}.
----
text/propagation-log
source from null: source{char: "l", next: 3, pos: 2}; {}. 
  source{char: "l", next: 3, pos: 2}; {}
1 from source: source{char: "l", next: 3, pos: 2}; {}. Match(source{char: "n", next: P2, pos: P1}; {})
2 from source: source{char: "l", next: 3, pos: 2}; {}. Match(source{char: "u", next: P3, pos: P2}; {})
4 from source: source{char: "l", next: 3, pos: 2}; {}. Match(source{char: "l", pos: P3}; {})
  source{char: "l", next: 3, pos: 2}; {P3: 2}
5 from 4: source{char: "l", next: 3, pos: 2}; {P3: 2}. Join(P3)
  (); {P1: 0, P2: 1, P3: 2}
null from 5: (); {P1: 0, P2: 1, P3: 2}. Subst({from: P1, to: P3})
  null{from: 0, to: 2}; {P1: 0, P2: 1, P3: 2}
0 from null: null{from: 0, to: 2}; {P1: 0, P2: 1, P3: 2}. Match(null{from: F, to: T}; {P1: F, P3: T})
  null{from: 0, to: 2}; {F: 0, T: 2}
value from 0: null{from: 0, to: 2}; {F: 0, T: 2}. Subst({from: F, to: T})
  value{from: 0, to: 2}; {F: 0, T: 2}
