"foo"
----
root_expr{id: 0}.
string_lit{id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 5}}, val: "foo"}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
type{id: 0, type: "string"}.

2
----
root_expr{id: 0}.
int_lit{id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 1}}, val: 2}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
type{id: 0, type: "int"}.

let x = 2 in x
----
root_expr{id: 0}.
let_expr{bindingID: 1, bodyID: 2, id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 14}}, varName: "x"}.
int_lit{id: 1, location: span{from: pos{idx: 8}, to: pos{idx: 9}}, val: 2}.
var{id: 2, location: span{from: pos{idx: 13}, to: pos{idx: 14}}, name: "x"}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 1, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 1, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 1, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 2, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 2, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "x", type: "int"}.
type{id: 0, type: "int"}.
type{id: 1, type: "int"}.
type{id: 2, type: "int"}.

let x = 2 in intToString(plus2(x))
----
root_expr{id: 0}.
let_expr{bindingID: 1, bodyID: 2, id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 34}}, varName: "x"}.
int_lit{id: 1, location: span{from: pos{idx: 8}, to: pos{idx: 9}}, val: 2}.
func_call{argID: 4, funcID: 3, id: 2, location: span{from: pos{idx: 13}, to: pos{idx: 34}}}.
var{id: 3, location: span{from: pos{idx: 13}, to: pos{idx: 24}}, name: "intToString"}.
func_call{argID: 6, funcID: 5, id: 4, location: span{from: pos{idx: 25}, to: pos{idx: 33}}}.
var{id: 5, location: span{from: pos{idx: 25}, to: pos{idx: 30}}, name: "plus2"}.
var{id: 6, location: span{from: pos{idx: 31}, to: pos{idx: 32}}, name: "x"}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 1, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 1, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 1, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 2, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 2, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "x", type: "int"}.
scope_item{id: 3, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 3, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 3, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 3, name: "x", type: "int"}.
scope_item{id: 4, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 4, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 4, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 4, name: "x", type: "int"}.
scope_item{id: 5, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 5, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 5, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 5, name: "x", type: "int"}.
scope_item{id: 6, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 6, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 6, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 6, name: "x", type: "int"}.
type{id: 0, type: "string"}.
type{id: 1, type: "int"}.
type{id: 2, type: "string"}.
type{id: 3, type: tapp{from: "int", to: "string"}}.
type{id: 4, type: "int"}.
type{id: 5, type: tapp{from: "int", to: "int"}}.
type{id: 6, type: "int"}.

let ts = (y: int): string => intToString(y) in ts(2)
----
root_expr{id: 0}.
let_expr{bindingID: 1, bodyID: 6, id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 52}}, varName: "ts"}.
lambda{body: 2, id: 1, location: span{from: pos{idx: 9}, to: pos{idx: 44}}, numParams: 1, retType: "string"}.
func_call{argID: 4, funcID: 3, id: 2, location: span{from: pos{idx: 29}, to: pos{idx: 44}}}.
var{id: 3, location: span{from: pos{idx: 29}, to: pos{idx: 40}}, name: "intToString"}.
var{id: 4, location: span{from: pos{idx: 41}, to: pos{idx: 42}}, name: "y"}.
lambda_param{idx: 0, lambdaID: 1, name: "y", ty: "int"}.
func_call{argID: 8, funcID: 7, id: 6, location: span{from: pos{idx: 47}, to: pos{idx: 52}}}.
var{id: 7, location: span{from: pos{idx: 47}, to: pos{idx: 49}}, name: "ts"}.
int_lit{id: 8, location: span{from: pos{idx: 50}, to: pos{idx: 51}}, val: 2}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 1, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 1, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 1, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 2, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 2, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "y", type: "int"}.
scope_item{id: 3, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 3, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 3, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 3, name: "y", type: "int"}.
scope_item{id: 4, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 4, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 4, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 4, name: "y", type: "int"}.
scope_item{id: 6, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 6, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 6, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 6, name: "ts", type: tapp{from: "int", to: "string"}}.
scope_item{id: 7, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 7, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 7, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 7, name: "ts", type: tapp{from: "int", to: "string"}}.
scope_item{id: 8, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 8, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 8, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 8, name: "ts", type: tapp{from: "int", to: "string"}}.
type{id: 0, type: "string"}.
type{id: 1, type: tapp{from: "int", to: "string"}}.
type{id: 2, type: "string"}.
type{id: 3, type: tapp{from: "int", to: "string"}}.
type{id: 4, type: "int"}.
type{id: 6, type: "string"}.
type{id: 7, type: tapp{from: "int", to: "string"}}.
type{id: 8, type: "int"}.

let x = 2 in let y = 3 in plus(2, 3)
----
root_expr{id: 0}.
let_expr{bindingID: 1, bodyID: 2, id: 0, location: span{from: pos{idx: 0}, to: pos{idx: 36}}, varName: "x"}.
int_lit{id: 1, location: span{from: pos{idx: 8}, to: pos{idx: 9}}, val: 2}.
let_expr{bindingID: 3, bodyID: 4, id: 2, location: span{from: pos{idx: 13}, to: pos{idx: 36}}, varName: "y"}.
int_lit{id: 3, location: span{from: pos{idx: 21}, to: pos{idx: 22}}, val: 3}.
func_call{argID: 8, funcID: 5, id: 4, location: span{from: pos{idx: 26}, to: pos{idx: 36}}}.
func_call{argID: 7, funcID: 6, id: 5, location: span{from: pos{idx: 26}, to: pos{idx: 30}}}.
var{id: 6, location: span{from: pos{idx: 26}, to: pos{idx: 30}}, name: "plus"}.
int_lit{id: 7, location: span{from: pos{idx: 31}, to: pos{idx: 32}}, val: 2}.
int_lit{id: 8, location: span{from: pos{idx: 34}, to: pos{idx: 35}}, val: 3}.
scope_item{id: 0, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 0, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 0, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 1, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 1, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 1, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 2, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 2, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 2, name: "x", type: "int"}.
scope_item{id: 3, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 3, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 3, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 3, name: "x", type: "int"}.
scope_item{id: 4, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 4, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 4, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 4, name: "x", type: "int"}.
scope_item{id: 4, name: "y", type: "int"}.
scope_item{id: 5, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 5, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 5, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 5, name: "x", type: "int"}.
scope_item{id: 5, name: "y", type: "int"}.
scope_item{id: 6, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 6, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 6, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 6, name: "x", type: "int"}.
scope_item{id: 6, name: "y", type: "int"}.
scope_item{id: 7, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 7, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 7, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 7, name: "x", type: "int"}.
scope_item{id: 7, name: "y", type: "int"}.
scope_item{id: 8, name: "intToString", type: tapp{from: "int", to: "string"}}.
scope_item{id: 8, name: "plus", type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
scope_item{id: 8, name: "plus2", type: tapp{from: "int", to: "int"}}.
scope_item{id: 8, name: "x", type: "int"}.
scope_item{id: 8, name: "y", type: "int"}.
type{id: 0, type: "int"}.
type{id: 1, type: "int"}.
type{id: 2, type: "int"}.
type{id: 3, type: "int"}.
type{id: 4, type: "int"}.
type{id: 5, type: tapp{from: "int", to: "int"}}.
type{id: 6, type: tapp{from: "int", to: tapp{from: "int", to: "int"}}}.
type{id: 7, type: "int"}.
type{id: 8, type: "int"}.
