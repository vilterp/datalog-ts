main :- repSep([a-z], <succeed>).
----
application/graphviz
digraph G {
  "0" [fillcolor="moccasin" label="0: Union []" shape="box" style="filled"];
  "1" [fillcolor="darkseagreen2" label="1: Match(main_item{span: span{from: P1, to: PN}}; {}) []" shape="box" style="filled"];
  "2" [fillcolor="darkseagreen2" label="2: Match(main_item{span: span{from: P1, to: P2}}; {}) [P2]" shape="box" style="filled"];
  "3" [fillcolor="darkseagreen2" label="3: Match(main{span: span{from: P2, to: PN}}; {}) [P2]" shape="box" style="filled"];
  "4" [fillcolor="thistle" label="4: Join(P2) []" shape="box" style="filled"];
  "5" [fillcolor="darkseagreen2" label="5: Match(source{char: C, id: P1}; {}) []" shape="box" style="filled"];
  "6" [fillcolor="darkseagreen1" label="6: \"a\" <= C []" shape="box" style="filled"];
  "7" [fillcolor="darkseagreen1" label="7: C <= \"z\" []" shape="box" style="filled"];
  "source" [fillcolor="darksalmon" label="source:  []" shape="box" style="filled"];
  "next" [fillcolor="darksalmon" label="next:  []" shape="box" style="filled"];
  "main" [fillcolor="lightblue" label="main: Subst({span: span{from: P1, to: PN}}) []" shape="box" style="filled"];
  "main_item" [fillcolor="lightblue" label="main_item: Subst({span: span{from: P1, to: P1}}) []" shape="box" style="filled"];
  "0" -> "main" [];
  "1" -> "0" [];
  "2" -> "4" [];
  "3" -> "4" [];
  "4" -> "0" [];
  "5" -> "6" [];
  "6" -> "7" [];
  "7" -> "main_item" [];
  "main" -> "3" [];
  "main_item" -> "1" [];
  "main_item" -> "2" [];
  "source" -> "5" [];
}

main :- expr.
expr :- (intLit | funcCall).
intLit :- [0-9].
funcCall :- [ident, "(", expr, ")"].
ident :- "foo".
----
application/graphviz
digraph G {
  "0" [fillcolor="moccasin" label="0: Union []" shape="box" style="filled"];
  "1" [fillcolor="darkseagreen2" label="1: Match(expr_choice_0{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "2" [fillcolor="darkseagreen2" label="2: Match(expr_choice_1{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "3" [fillcolor="darkseagreen2" label="3: Match(intLit{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "4" [fillcolor="darkseagreen2" label="4: Match(funcCall{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "5" [fillcolor="darkseagreen2" label="5: Match(funcCall_seq_0{span: span{from: P1, to: P2}}; {}) [P2]" shape="box" style="filled"];
  "6" [fillcolor="darkseagreen2" label="6: Match(next{left: P2, right: P3}; {}) [P2]" shape="box" style="filled"];
  "7" [fillcolor="thistle" label="7: Join(P2) [P3]" shape="box" style="filled"];
  "8" [fillcolor="darkseagreen2" label="8: Match(funcCall_seq_1{span: span{from: P3, to: P4}}; {}) [P3]" shape="box" style="filled"];
  "9" [fillcolor="thistle" label="9: Join(P3) [P4]" shape="box" style="filled"];
  "10" [fillcolor="darkseagreen2" label="10: Match(next{left: P4, right: P5}; {}) [P4]" shape="box" style="filled"];
  "11" [fillcolor="thistle" label="11: Join(P4) [P5]" shape="box" style="filled"];
  "12" [fillcolor="darkseagreen2" label="12: Match(funcCall_seq_2{span: span{from: P5, to: P6}}; {}) [P5]" shape="box" style="filled"];
  "13" [fillcolor="thistle" label="13: Join(P5) [P6]" shape="box" style="filled"];
  "14" [fillcolor="darkseagreen2" label="14: Match(next{left: P6, right: P7}; {}) [P6]" shape="box" style="filled"];
  "15" [fillcolor="thistle" label="15: Join(P6) [P7]" shape="box" style="filled"];
  "16" [fillcolor="darkseagreen2" label="16: Match(funcCall_seq_3{span: span{from: P7, to: P8}}; {}) [P7]" shape="box" style="filled"];
  "17" [fillcolor="thistle" label="17: Join(P7) []" shape="box" style="filled"];
  "18" [fillcolor="darkseagreen2" label="18: Match(ident{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "19" [fillcolor="darkseagreen2" label="19: Match(source{char: \"(\", id: P1}; {}) []" shape="box" style="filled"];
  "20" [fillcolor="darkseagreen2" label="20: Match(expr{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "21" [fillcolor="darkseagreen2" label="21: Match(source{char: \")\", id: P1}; {}) []" shape="box" style="filled"];
  "22" [fillcolor="darkseagreen2" label="22: Match(source{char: \"f\", id: P1}; {}) [P1]" shape="box" style="filled"];
  "23" [fillcolor="darkseagreen2" label="23: Match(next{left: P1, right: P2}; {}) [P1]" shape="box" style="filled"];
  "24" [fillcolor="thistle" label="24: Join(P1) [P2]" shape="box" style="filled"];
  "25" [fillcolor="darkseagreen2" label="25: Match(source{char: \"o\", id: P2}; {}) [P2]" shape="box" style="filled"];
  "26" [fillcolor="thistle" label="26: Join(P2) [P2]" shape="box" style="filled"];
  "27" [fillcolor="darkseagreen2" label="27: Match(next{left: P2, right: P3}; {}) [P2]" shape="box" style="filled"];
  "28" [fillcolor="thistle" label="28: Join(P2) [P3]" shape="box" style="filled"];
  "29" [fillcolor="darkseagreen2" label="29: Match(source{char: \"o\", id: P3}; {}) [P3]" shape="box" style="filled"];
  "30" [fillcolor="thistle" label="30: Join(P3) []" shape="box" style="filled"];
  "31" [fillcolor="darkseagreen2" label="31: Match(source{char: C, id: P1}; {}) []" shape="box" style="filled"];
  "32" [fillcolor="darkseagreen1" label="32: \"0\" <= C []" shape="box" style="filled"];
  "33" [fillcolor="darkseagreen1" label="33: C <= \"9\" []" shape="box" style="filled"];
  "34" [fillcolor="darkseagreen2" label="34: Match(expr{span: span{from: P1, to: P2}}; {}) []" shape="box" style="filled"];
  "source" [fillcolor="darksalmon" label="source:  []" shape="box" style="filled"];
  "next" [fillcolor="darksalmon" label="next:  []" shape="box" style="filled"];
  "expr" [fillcolor="lightblue" label="expr: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "expr_choice_0" [fillcolor="lightblue" label="expr_choice_0: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "expr_choice_1" [fillcolor="lightblue" label="expr_choice_1: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "funcCall" [fillcolor="lightblue" label="funcCall: Subst({seq_0: span{from: P1, to: P2}, seq_1: span{from: P3, to: P4}, seq_2: span{from: P5, to: P6}, seq_3: span{from: P7, to: P8}, span: span{from: P1, to: P8}}) []" shape="box" style="filled"];
  "funcCall_seq_0" [fillcolor="lightblue" label="funcCall_seq_0: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "funcCall_seq_1" [fillcolor="lightblue" label="funcCall_seq_1: Subst({span: span{from: P1, to: P1}}) []" shape="box" style="filled"];
  "funcCall_seq_2" [fillcolor="lightblue" label="funcCall_seq_2: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "funcCall_seq_3" [fillcolor="lightblue" label="funcCall_seq_3: Subst({span: span{from: P1, to: P1}}) []" shape="box" style="filled"];
  "ident" [fillcolor="lightblue" label="ident: Subst({span: span{from: P1, to: P3}}) []" shape="box" style="filled"];
  "intLit" [fillcolor="lightblue" label="intLit: Subst({span: span{from: P1, to: P1}}) []" shape="box" style="filled"];
  "main" [fillcolor="lightblue" label="main: Subst({span: span{from: P1, to: P2}}) []" shape="box" style="filled"];
  "0" -> "expr" [];
  "1" -> "0" [];
  "10" -> "11" [];
  "11" -> "13" [];
  "12" -> "13" [];
  "13" -> "15" [];
  "14" -> "15" [];
  "15" -> "17" [];
  "16" -> "17" [];
  "17" -> "funcCall" [];
  "18" -> "funcCall_seq_0" [];
  "19" -> "funcCall_seq_1" [];
  "2" -> "0" [];
  "20" -> "funcCall_seq_2" [];
  "21" -> "funcCall_seq_3" [];
  "22" -> "24" [];
  "23" -> "24" [];
  "24" -> "26" [];
  "25" -> "26" [];
  "26" -> "28" [];
  "27" -> "28" [];
  "28" -> "30" [];
  "29" -> "30" [];
  "3" -> "expr_choice_0" [];
  "30" -> "ident" [];
  "31" -> "32" [];
  "32" -> "33" [];
  "33" -> "intLit" [];
  "34" -> "main" [];
  "4" -> "expr_choice_1" [];
  "5" -> "7" [];
  "6" -> "7" [];
  "7" -> "9" [];
  "8" -> "9" [];
  "9" -> "11" [];
  "expr" -> "20" [];
  "expr" -> "34" [];
  "expr_choice_0" -> "1" [];
  "expr_choice_1" -> "2" [];
  "funcCall" -> "4" [];
  "funcCall_seq_0" -> "5" [];
  "funcCall_seq_1" -> "8" [];
  "funcCall_seq_2" -> "12" [];
  "funcCall_seq_3" -> "16" [];
  "ident" -> "18" [];
  "intLit" -> "3" [];
  "next" -> "6" [];
  "next" -> "10" [];
  "next" -> "14" [];
  "next" -> "23" [];
  "next" -> "27" [];
  "source" -> "19" [];
  "source" -> "21" [];
  "source" -> "22" [];
  "source" -> "25" [];
  "source" -> "29" [];
  "source" -> "31" [];
}
