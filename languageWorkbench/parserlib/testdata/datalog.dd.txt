gram
main :- "foo".
----
application/datalog
grammar.charLiteralEdge{from: 0, to: 1, val: "f"}.
grammar.charLiteralEdge{from: 1, to: 2, val: "o"}.
grammar.charLiteralEdge{from: 2, to: 3, val: "o"}.
grammar.rule{from: 0, name: "main", to: 3}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 3}.

input
foo
----
application/datalog
parse.Complete{}.

gram
main :- ["a", "b", "c"].
----
application/datalog
grammar.charLiteralEdge{from: 0, to: 1, val: "a"}.
grammar.charLiteralEdge{from: 1, to: 2, val: "b"}.
grammar.charLiteralEdge{from: 2, to: 3, val: "c"}.
grammar.rule{from: 0, name: "main", to: 3}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 3}.

input
abc
----
application/datalog
parse.Complete{}.

gram
main :- (foo | bar).
foo :- "foo".
bar :- "bar".
----
application/datalog
grammar.charLiteralEdge{from: 10, to: 11, val: "r"}.
grammar.charLiteralEdge{from: 4, to: 5, val: "f"}.
grammar.charLiteralEdge{from: 5, to: 6, val: "o"}.
grammar.charLiteralEdge{from: 6, to: 7, val: "o"}.
grammar.charLiteralEdge{from: 8, to: 9, val: "b"}.
grammar.charLiteralEdge{from: 9, to: 10, val: "a"}.
grammar.jumpEdge{from: 2, to: 1}.
grammar.jumpEdge{from: 3, to: 1}.
grammar.refEdge{from: 0, ref: "bar", to: 3}.
grammar.refEdge{from: 0, ref: "foo", to: 2}.
grammar.rule{from: 0, name: "main", to: 1}.
grammar.rule{from: 4, name: "foo", to: 7}.
grammar.rule{from: 8, name: "bar", to: 11}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 10}.
grammar.stateNode{id: 11}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 3}.
grammar.stateNode{id: 4}.
grammar.stateNode{id: 5}.
grammar.stateNode{id: 6}.
grammar.stateNode{id: 7}.
grammar.stateNode{id: 8}.
grammar.stateNode{id: 9}.

input
foo
----
application/datalog
parse.Complete{}.

input
bar
----
application/datalog
parse.Complete{}.

gram
main :- repSep("foo", "bar").
----
application/datalog
grammar.charLiteralEdge{from: 0, to: 1, val: "f"}.
grammar.charLiteralEdge{from: 1, to: 2, val: "o"}.
grammar.charLiteralEdge{from: 2, to: 3, val: "o"}.
grammar.charLiteralEdge{from: 3, to: 4, val: "b"}.
grammar.charLiteralEdge{from: 4, to: 5, val: "a"}.
grammar.charLiteralEdge{from: 5, to: 6, val: "r"}.
grammar.jumpEdge{from: 0, to: 3}.
grammar.jumpEdge{from: 6, to: 0}.
grammar.rule{from: 0, name: "main", to: 3}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 3}.
grammar.stateNode{id: 4}.
grammar.stateNode{id: 5}.
grammar.stateNode{id: 6}.

input
foo
----
application/datalog
parse.Complete{}.

input
foobar
----
application/datalog
parse.Complete{}.

input
foobarfoo
----
application/datalog
parse.Complete{}.

gram
main :- ["[", repSep([a-z], ","), "]"].
----
application/datalog
grammar.charLiteralEdge{from: 0, to: 1, val: "["}.
grammar.charLiteralEdge{from: 2, to: 3, val: ","}.
grammar.charLiteralEdge{from: 2, to: 4, val: "]"}.
grammar.charRangeEdge{from: 1, rangeEnd: "z", rangeStart: "a", to: 2}.
grammar.jumpEdge{from: 1, to: 2}.
grammar.jumpEdge{from: 3, to: 1}.
grammar.rule{from: 0, name: "main", to: 4}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 3}.
grammar.stateNode{id: 4}.

input
[a,b,c]
----
application/datalog

gram
main :- repSep([0-9], "").
----
application/datalog
grammar.charRangeEdge{from: 0, rangeEnd: "9", rangeStart: "0", to: 1}.
grammar.jumpEdge{from: 0, to: 1}.
grammar.jumpEdge{from: 1, to: 0}.
grammar.rule{from: 0, name: "main", to: 1}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 1}.

input
1
----
application/datalog
parse.Complete{}.

input
123
----
application/datalog

gram
main :- value.
value :- (object | array | int | string | null).
int :- [[0-9], repSep([0-9], "")].
object :- ["{", repSep(keyValue, ","), "}"].
keyValue :- [string, ":", value].
string :- ["'", repSep([a-z], ""), "'"].
array :- ["[", repSep(value, ","), "]"].
null :- "null".
----
application/datalog
grammar.charLiteralEdge{from: 12, to: 13, val: "{"}.
grammar.charLiteralEdge{from: 14, to: 15, val: ","}.
grammar.charLiteralEdge{from: 14, to: 16, val: "}"}.
grammar.charLiteralEdge{from: 18, to: 19, val: ":"}.
grammar.charLiteralEdge{from: 21, to: 22, val: "'"}.
grammar.charLiteralEdge{from: 23, to: 24, val: "'"}.
grammar.charLiteralEdge{from: 25, to: 26, val: "["}.
grammar.charLiteralEdge{from: 27, to: 28, val: ","}.
grammar.charLiteralEdge{from: 27, to: 29, val: "]"}.
grammar.charLiteralEdge{from: 30, to: 31, val: "n"}.
grammar.charLiteralEdge{from: 31, to: 32, val: "u"}.
grammar.charLiteralEdge{from: 32, to: 33, val: "l"}.
grammar.charLiteralEdge{from: 33, to: 34, val: "l"}.
grammar.charRangeEdge{from: 10, rangeEnd: "9", rangeStart: "0", to: 11}.
grammar.charRangeEdge{from: 22, rangeEnd: "z", rangeStart: "a", to: 23}.
grammar.charRangeEdge{from: 9, rangeEnd: "9", rangeStart: "0", to: 10}.
grammar.jumpEdge{from: 10, to: 11}.
grammar.jumpEdge{from: 11, to: 10}.
grammar.jumpEdge{from: 13, to: 14}.
grammar.jumpEdge{from: 15, to: 13}.
grammar.jumpEdge{from: 22, to: 23}.
grammar.jumpEdge{from: 23, to: 22}.
grammar.jumpEdge{from: 26, to: 27}.
grammar.jumpEdge{from: 28, to: 26}.
grammar.jumpEdge{from: 4, to: 3}.
grammar.jumpEdge{from: 5, to: 3}.
grammar.jumpEdge{from: 6, to: 3}.
grammar.jumpEdge{from: 7, to: 3}.
grammar.jumpEdge{from: 8, to: 3}.
grammar.refEdge{from: 0, ref: "value", to: 1}.
grammar.refEdge{from: 13, ref: "keyValue", to: 14}.
grammar.refEdge{from: 17, ref: "string", to: 18}.
grammar.refEdge{from: 19, ref: "value", to: 20}.
grammar.refEdge{from: 2, ref: "array", to: 5}.
grammar.refEdge{from: 2, ref: "int", to: 6}.
grammar.refEdge{from: 2, ref: "null", to: 8}.
grammar.refEdge{from: 2, ref: "object", to: 4}.
grammar.refEdge{from: 2, ref: "string", to: 7}.
grammar.refEdge{from: 26, ref: "value", to: 27}.
grammar.rule{from: 0, name: "main", to: 1}.
grammar.rule{from: 12, name: "object", to: 16}.
grammar.rule{from: 17, name: "keyValue", to: 20}.
grammar.rule{from: 2, name: "value", to: 3}.
grammar.rule{from: 21, name: "string", to: 24}.
grammar.rule{from: 25, name: "array", to: 29}.
grammar.rule{from: 30, name: "null", to: 34}.
grammar.rule{from: 9, name: "int", to: 11}.
grammar.stateNode{id: 0}.
grammar.stateNode{id: 10}.
grammar.stateNode{id: 11}.
grammar.stateNode{id: 12}.
grammar.stateNode{id: 13}.
grammar.stateNode{id: 14}.
grammar.stateNode{id: 15}.
grammar.stateNode{id: 16}.
grammar.stateNode{id: 17}.
grammar.stateNode{id: 18}.
grammar.stateNode{id: 19}.
grammar.stateNode{id: 1}.
grammar.stateNode{id: 20}.
grammar.stateNode{id: 21}.
grammar.stateNode{id: 22}.
grammar.stateNode{id: 23}.
grammar.stateNode{id: 24}.
grammar.stateNode{id: 25}.
grammar.stateNode{id: 26}.
grammar.stateNode{id: 27}.
grammar.stateNode{id: 28}.
grammar.stateNode{id: 29}.
grammar.stateNode{id: 2}.
grammar.stateNode{id: 30}.
grammar.stateNode{id: 31}.
grammar.stateNode{id: 32}.
grammar.stateNode{id: 33}.
grammar.stateNode{id: 34}.
grammar.stateNode{id: 3}.
grammar.stateNode{id: 4}.
grammar.stateNode{id: 5}.
grammar.stateNode{id: 6}.
grammar.stateNode{id: 7}.
grammar.stateNode{id: 8}.
grammar.stateNode{id: 9}.

input
null
----
application/datalog
parse.Complete{}.

input
[1,2,3]
----
application/datalog
